# Operating system setup

This section details processes relating to the operating system prior to even starting the install!

## Networking

### Wifi only

Switch Wifi off by removing wifi related configs (in my case `rm /etc/netplan/50-cloud-init.yaml`). 
Create a new file in [/etc/netplan/01-netcfg.yaml](../configs/01-netcfg.yaml).
Make sure ownership is root and permission are 600 (`chown root: /etc/netplan/01-netcfg.yaml; chmod 600 /etc/netplan/01-netcfg.yaml`).

### IPv6 only

Disable in grub, edit `/etc/default/grub` to have `GRUB_CMDLINE_LINUX_DEFAULT="ipv6.disable=1"` in. run `update-grub` and then `reboot`.
I can script this, but run with cautious as the sed may remove more than you intend:
```
sed -i s'/GRUB_CMDLINE_LINUX_DEFAULT=""/GRUB_CMDLINE_LINUX_DEFAULT="ipv6.disable=1"/1' /etc/default/grub
update-grub
reboot
```

### DHCP

Change the netcfg to be static (see [/etc/netplan/01-netcfg.yaml](../configs/01-netcfg.yaml#L6-L12))

## Update the OS

`apt update && sudo apt full-upgrade -y`

## Disable the firewall

For simplicity sake I'm going to switch the firewall off. Please **DO NOT** do this if your server is live on the internet.

```
systemctl disable ufw
systemctl mask ufw
```
I'm sure there are a set of firewall rules which can be defined, but given I'm in a secure environment I'm just going to switch it off for the interim.

## Fin

Finally after all this we have a static, no IPv6 wired system without a firewall which I can transport to my home and plug in and ssh into.
